<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="By: Tanya Butt, Catherine Lucey, and Irene Martinez Morata" />

<meta name="date" content="2021-12-11" />

<title>P8105 Final Project Report</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Final_Project_Report.html">Project Report</a>
</li>
<li>
  <a href="analysis.html">Exploratory Analysis</a>
</li>
<li>
  <a href="nyc_maps.html">Map Visualizations</a>
</li>
<li>
  <a href="mailto:&lt;thb2114@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/tanyahbutt/p8105finalproject">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">P8105 Final Project Report</h1>
<h4 class="author">By: Tanya Butt, Catherine Lucey, and Irene Martinez Morata</h4>
<h4 class="date">12/11/2021</h4>

</div>


<div id="covid-19-and-specialized-high-school-admissons-in-new-york-city" class="section level1">
<h1>Covid-19 And Specialized High School Admissons in New York City</h1>
<p>Exploring the Potential Associations between Specialized High School Admissions Offers and COVID-19 Rates in NYC</p>
<div id="motivation-and-related-work" class="section level2">
<h2>Motivation and Related Work</h2>
</div>
<div id="project-aims" class="section level2">
<h2>Project Aims</h2>
<p>(this is the initial questions section)</p>
</div>
<div id="data-cleaning" class="section level2">
<h2>Data Cleaning</h2>
<div id="shsat-testing-and-offers-dataset" class="section level3">
<h3>SHSAT Testing and Offers Dataset</h3>
<div id="loading-and-cleaning-yearly-shsat-data" class="section level5">
<h5>Loading and Cleaning Yearly SHSAT Data</h5>
<p>Due to small differences in variable naming between 2015-2017 and 2018-2020, data importing and cleaning was done in two parts using the functions <code>clean_shsatv1</code> and <code>clean_shsatv2</code>. In the original data sets, the number of offers for schools where five or fewer students received an offer to a specialized high school was recorded as “0-5,” thus we could not distinguish between schools that had no students receiving a specialized high school offer and schools that had up to five students receiving an offer. 0-5 values for <code>n_offers</code> were converted to “5,” and all values in the column were converted to numerics for easy manipulation. School years, of the format 2015-2016, were re-coded as the year of the fall semester: <code>year = 2015</code> represents school year that began in Fall 2015 and ended in Spring 2016, in which eighth graders took the SHSAT in the fall of 2015 and received high school offers in the spring of 2016. Lastly, duplicates were removed from the combined SHSAT dataset with the <code>unique()</code> function, removing 565 values. We suspect that all duplicates are from the 2019 dataset, which seems to mysteriously duplicate in the <code>rbind()</code> process.</p>
<pre class="r"><code># define functions to load and clean each .csv

clean_shsatv1 = function(df){
  clean_df = 
    df %&gt;% 
    janitor::clean_names() %&gt;% 
    rename(
      dbn = feeder_school_dbn,
      feeder_school = feeder_school_name,
      n_offers = count_of_offers,
      n_testers = count_of_testers,
      n_hs_applicants = count_of_students_in_hs_admissions,
      ) %&gt;% 
    mutate(
      n_hs_applicants = 
        replace(n_hs_applicants, n_hs_applicants == &quot;0-5&quot;, &quot;5&quot;),
      n_hs_applicants = as.double(n_hs_applicants)
    ) %&gt;% 
    mutate(
      n_offers = 
        replace(n_offers, n_offers == &quot;0-5&quot;, &quot;5&quot;),
      n_offers = as.double(n_offers)
    ) %&gt;% 
    mutate(
      n_testers =
        replace(n_testers, n_testers == &quot;0-5&quot;, &quot;5&quot;),
      n_testers = as.double(n_testers)
    )
  
  return(clean_df)
}

clean_shsatv2 = function(df){
  clean_df =
    df %&gt;% 
    janitor::clean_names() %&gt;% 
    rename(
      dbn = feeder_school_dbn,
      feeder_school = feeder_school_name,
      n_offers = number_of_offers,
      n_testers = count_of_testers,
      n_hs_applicants = count_of_students_in_hs_admissions,
      ) %&gt;% 
    mutate(
      n_hs_applicants = 
        replace(n_hs_applicants, n_hs_applicants == &quot;0-5&quot;, &quot;5&quot;),
      n_hs_applicants = as.double(n_hs_applicants)
    ) %&gt;% 
    mutate(
      n_offers = 
        replace(n_offers, n_offers == &quot;0-5&quot;, &quot;5&quot;),
      n_offers = as.double(n_offers)
    ) %&gt;% 
    mutate(
      n_testers =
        replace(n_testers, n_testers == &quot;0-5&quot;, &quot;5&quot;),
      n_testers = as.double(n_testers)
    )
  
  return(clean_df)
}</code></pre>
<pre class="r"><code># import and clean each of the six years of SHSAT data individually

fifteen_df = 
  read_csv(&quot;raw_data/shsat_1/2015-2016_SHSAT_Admissions_Test_Offers_By_Sending_School.csv&quot;) %&gt;% 
  mutate(year = &quot;2015&quot;) %&gt;% 
  clean_shsatv1()

sixteen_df =
  read_csv(&quot;raw_data/shsat_1/2016-2017_SHSAT_Admissions_Test_Offers_By_Sending_School.csv&quot;) %&gt;% 
  mutate(year = &quot;2016&quot;) %&gt;% 
  clean_shsatv1()

seventeen_df =
  read_csv(&quot;raw_data/shsat_1/2017-2018_SHSAT_Admissions_Test_Offers_By_Sending_School.csv&quot;) %&gt;% 
  mutate(year = &quot;2017&quot;) %&gt;% 
  clean_shsatv1()

eighteen_df =
  read_csv(&quot;raw_data/shsat_1/2018-2019_SHSAT_Admissions_Test_Offers_By_Sending_School.csv&quot;) %&gt;% 
  mutate(year = &quot;2018&quot;) %&gt;% 
  clean_shsatv2()

nineteen_df =
  read_csv(&quot;raw_data/shsat_1/2019-2020_SHSAT_Admissions_Test_Offers_By_Sending_School.csv&quot;) %&gt;% 
  mutate(year = &quot;2019&quot;) %&gt;% 
  clean_shsatv2()

twenty_df =
  read_csv(&quot;raw_data/shsat_1/2020-2021_SHSAT_Admissions_Test_Offers_By_Sending_School.csv&quot;) %&gt;% 
  mutate(year = &quot;2020&quot;) %&gt;% 
  clean_shsatv2()

# bind all years into a cohesive dataframe, filter for unique values

shsat_df = 
  rbind(
    fifteen_df, 
    sixteen_df, 
    seventeen_df, 
    eighteen_df, 
    nineteen_df, 
    twenty_df) %&gt;% 
  unique()</code></pre>
<p>These data were then joined with the DOE 2020 Middle School Directory dataset to obtain a zip code for each sending middle school, and exported for use in subsequent analyses.</p>
<pre class="r"><code>ms_dir_import =
  read_csv(&quot;raw_data/2019_DOE_Middle_School_Directory.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  select(schooldbn, borough, postcode, address) %&gt;% 
  rename(
    dbn = schooldbn,
    zip = postcode
  )

shsat_zip_df =
  full_join(shsat_df, ms_dir_import, by = &quot;dbn&quot;) %&gt;% 
  select(dbn, n_hs_applicants, n_testers, n_offers, year, borough, zip) %&gt;% 
  drop_na()

write.csv(shsat_zip_df, &quot;shsat_data.csv&quot;)</code></pre>
<p>Because the DOE middle school directory only includes data for public middle schools, addresses were not available for charter schools and thus charter schools were excluded from this analysis (max of n = 191 in 2020), leaving data for 464 schools for 2015-2017, 465 schools for 2018 and 2019, and 467 schools in 2020 (See TABLE WHAT NUMBER???).</p>
<pre class="r"><code># keep a version of the shsat_zip_df that retains NA values just to count NAs

full_shsat_zip_df =
  full_join(shsat_df, ms_dir_import, by = &quot;dbn&quot;)

n_kept =
  full_shsat_zip_df %&gt;%
  select(zip, year) %&gt;% 
  filter(!is.na(zip)) %&gt;% 
  group_by(year) %&gt;%
  count()

n_na =
  full_shsat_zip_df %&gt;%
  select(zip, year) %&gt;% 
  filter(is.na(zip)) %&gt;% 
  group_by(year) %&gt;%
  count()

n_removed_table =
  full_join(n_na, n_kept, by = &quot;year&quot;) %&gt;% 
  mutate(
    `Number of NA Values Removed` = n.x,
    `Number of Schools Kept` = n.y
  ) %&gt;% 
  select(year,`Number of NA Values Removed`, `Number of Schools Kept` ) %&gt;% 
  knitr::kable() %&gt;% 
  print()</code></pre>
<pre><code>## 
## 
## |year | Number of NA Values Removed| Number of Schools Kept|
## |:----|---------------------------:|----------------------:|
## |2015 |                         130|                    464|
## |2016 |                         130|                    464|
## |2017 |                         130|                    464|
## |2018 |                         120|                    465|
## |2019 |                         130|                    465|
## |2020 |                         191|                    467|</code></pre>
<p>AT THIS POINT I’LL PUT IN DOING THE WEIGHTED AVERAGES ETC ETC ETC ETC</p>
</div>
</div>
<div id="variable-dictionary" class="section level3">
<h3>Variable Dictionary</h3>
<p><code>n_offers</code> = total number of eighth grade students who received an offer to a specialized high school at a given middle school</p>
<p><code>n_testers</code> = total number of eighth grade students taking the SHSAT exam, equivalent to the number of students applying to specialized high schools at a given middle school</p>
<p><code>n_hs_applicants</code> = total number of eighth grade students participating in the high school applications process (applicants to specialized + non-specialized high schools) at a given middle school</p>
<p><code>dbn</code> = district borough number, a unique school identification number assigned by the NYC DOE</p>
<p><code>feeder_school</code> = full name of the “sending” middle school (middle school at which applicants are currently enrolled)</p>
</div>
</div>
<div id="exploratory-data-analysis-eda" class="section level2">
<h2>Exploratory Data Analysis (EDA)</h2>
</div>
<div id="additional-analysis-modeling" class="section level2">
<h2>Additional Analysis: Modeling</h2>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
